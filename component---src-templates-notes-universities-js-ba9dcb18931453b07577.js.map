{"version":3,"file":"component---src-templates-notes-universities-js-ba9dcb18931453b07577.js","mappings":"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","sources":["webpack://chen-huang/./src/components/slugify.js","webpack://chen-huang/./src/components/Notes/NotesInstitutions.js","webpack://chen-huang/./src/hooks/useRandomNotePost.js","webpack://chen-huang/./src/components/Notes/NotesLayout.js","webpack://chen-huang/./src/components/Notes/NoteCard.js","webpack://chen-huang/./src/templates/notes-universities.js","webpack://chen-huang/./src/components/Notes/NotesTags.js","webpack://chen-huang/./src/components/common/SplitLayout.js"],"sourcesContent":["const slugify = (str) =>\n  str\n    ?.toString()\n    .trim()\n    .toLowerCase()\n    .replace(/[^a-z0-9\\s-]/g, \"\") // remove non-alphanumeric characters except space and dash\n    .replace(/\\s+/g, \"-\") // replace spaces with dashes\n    .replace(/-+/g, \"-\"); // collapse multiple dashes\n\nmodule.exports = slugify;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\nimport { Link, useI18next } from \"gatsby-plugin-react-i18next\";\nimport slugify from \"@components/slugify\";\n\nexport const useUniversity = () => {\n  const { language } = useI18next();\n  const data = useStaticQuery(graphql`\n    query {\n      allMarkdownRemark(\n        limit: 2000\n        filter: { fields: { posttype: { eq: \"notes\" } } }\n      ) {\n        edges {\n          node {\n            fields {\n              language\n            }\n            frontmatter {\n              institution\n              institution_slug\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  // Filter by language and collect institutions\n  const languagePosts = data.allMarkdownRemark.edges.filter(\n    ({ node }) => node.fields.language === language\n  );\n\n  // Collect all institutions from current language posts\n  const institutionCounts = {};\n  languagePosts.forEach(({ node }) => {\n    if (node.frontmatter.institution) {\n      const institutions = Array.isArray(node.frontmatter.institution)\n        ? node.frontmatter.institution\n        : [node.frontmatter.institution];\n\n      institutions.forEach((institution) => {\n        institutionCounts[institution] =\n          (institutionCounts[institution] || 0) + 1;\n      });\n    }\n  });\n\n  // Convert to the expected format\n  const group = Object.entries(institutionCounts).map(\n    ([fieldValue, totalCount]) => ({\n      fieldValue,\n      totalCount,\n    })\n  );\n\n  return { allMarkdownRemark: { group } };\n};\n\nexport const TagBreadcrumb = styled(Link)`\n  float: left;\n  border: 1px solid ${(p) => (p.theme.dark ? p.theme.primaryColor : \"#d9e0ff\")};\n  border-radius: 50px;\n  padding: 8px 13px;\n  line-height: 110%;\n  margin: 5px;\n  font-size: 12px;\n\n  &:hover {\n    background: ${(p) => (p.theme.dark ? p.theme.primaryColor : \"#d9e0ff\")};\n    color: ${(p) => (p.theme.dark ? \"#d9e0ff\" : \"#105286\")};\n  }\n`;\n\nconst Institutions = () => {\n  const { language } = useI18next();\n  const data = useStaticQuery(graphql`\n    query {\n      allMarkdownRemark(\n        limit: 2000\n        filter: { fields: { posttype: { eq: \"notes\" } } }\n      ) {\n        edges {\n          node {\n            fields {\n              language\n            }\n            frontmatter {\n              institution\n              institution_slug\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  // Filter by language and collect institutions\n  const languagePosts = data.allMarkdownRemark.edges.filter(\n    ({ node }) => node.fields.language === language\n  );\n\n  // Collect all institutions from current language posts\n  const institutionCounts = {};\n  languagePosts.forEach(({ node }) => {\n    if (node.frontmatter.institution) {\n      const institutions = Array.isArray(node.frontmatter.institution)\n        ? node.frontmatter.institution\n        : [node.frontmatter.institution];\n\n      institutions.forEach((institution) => {\n        institutionCounts[institution] =\n          (institutionCounts[institution] || 0) + 1;\n      });\n    }\n  });\n\n  // Convert to the expected format\n  const institutions = Object.entries(institutionCounts).map(\n    ([fieldValue, totalCount]) => ({\n      fieldValue,\n      totalCount,\n    })\n  );\n\n  return (\n    <section style={{ overflow: \"auto\" }}>\n      {institutions.map((tag) => {\n        // 查找 institution_slug\n        // 需要先找到对应的 node\n        const node = languagePosts.find(({ node }) =>\n          Array.isArray(node.frontmatter.institution)\n            ? node.frontmatter.institution.includes(tag.fieldValue)\n            : node.frontmatter.institution === tag.fieldValue\n        )?.node;\n\n        const slug =\n          node && node.frontmatter.institution_slug\n            ? node.frontmatter.institution_slug\n            : slugify(tag.fieldValue);\n\n        return (\n          <TagBreadcrumb\n            key={tag.fieldValue}\n            to={`/notes/institution/${slug}/`}\n            aria-label={`${tag.totalCount} posts tagged with ${tag.fieldValue}`}\n          >\n            {tag.fieldValue}, {tag.totalCount}\n          </TagBreadcrumb>\n        );\n      })}\n    </section>\n  );\n};\n\nexport default Institutions;\n","import { useStaticQuery, graphql } from \"gatsby\";\nimport { useTranslation } from \"gatsby-plugin-react-i18next\";\n\nexport const randomGenerator = (min, max) => {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nconst useRandomNotePost = () => {\n  const { i18n } = useTranslation();\n  const currentLanguage = i18n.language;\n\n  const noteposts = useStaticQuery(graphql`\n    query {\n      allMarkdownRemark(filter: { fields: { posttype: { eq: \"notes\" } } }) {\n        edges {\n          node {\n            frontmatter {\n              title\n            }\n            fields {\n              slug\n              language\n            }\n          }\n        }\n        totalCount\n      }\n    }\n  `);\n\n  // 根据当前语言过滤文章\n  const filteredPosts = noteposts.allMarkdownRemark.edges.filter(\n    ({ node }) => node.fields.language === currentLanguage\n  );\n\n  // 如果没有当前语言的文章，返回null\n  if (filteredPosts.length === 0) {\n    return {\n      randomSlug: null,\n      randomTitle: null,\n    };\n  }\n\n  let randomPost = filteredPosts[randomGenerator(0, filteredPosts.length - 1)];\n\n  // make sure we don't have redundant randomPost\n  if (typeof window !== \"undefined\") {\n    while (randomPost.node.fields.slug === window.location.pathname) {\n      randomPost = filteredPosts[randomGenerator(0, filteredPosts.length - 1)];\n      // don't wanna run it second time\n      break;\n    }\n  }\n\n  return {\n    randomSlug: randomPost.node.fields.slug,\n    randomTitle: randomPost.node.frontmatter.title,\n  };\n};\nexport default useRandomNotePost;\n","import React from \"react\";\n\nimport PropTypes from \"prop-types\";\nimport { Link, Trans, useTranslation } from \"gatsby-plugin-react-i18next\";\nimport Tags from \"@src/components/Notes/NotesTags\";\nimport Institutions from \"@src/components/Notes/NotesInstitutions\";\nimport SplitLayout from \"@common/SplitLayout\";\nimport useRandomNotePost from \"@src/hooks/useRandomNotePost\";\n\nconst NoteLayout = ({ children, sharerSection }) => {\n  const { t } = useTranslation();\n  const { randomSlug, randomTitle } = useRandomNotePost();\n\n  return (\n    <SplitLayout\n      content={children}\n      aside={\n        <>\n          {randomSlug && randomTitle && (\n            <section>\n              <h4>{t(\"nav.random-note\", \"Random note\")}</h4>\n              <Link style={{ fontSize: \"16px\" }} to={randomSlug}>\n                {randomTitle}\n              </Link>\n              <br />\n              <br />\n            </section>\n          )}\n          <section>\n            <h4>{t(\"nav.tags\", \"Tags\")}</h4>\n            <Tags />\n            <br />\n          </section>\n          <section>\n            <h4>{t(\"nav.institution\", \"Institution\")}</h4>\n            <Institutions />\n            <br />\n          </section>\n          {sharerSection && sharerSection}\n        </>\n      }\n    />\n  );\n};\n\nNoteLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n  sharerSection: PropTypes.node,\n};\n\nexport default NoteLayout;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { Link, Trans, useTranslation } from \"gatsby-plugin-react-i18next\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { TagBreadcrumb } from \"./NotesTags\";\nimport slugify from \"@components/slugify\";\n\nconst PostWrapper = styled.article`\n  overflow: auto;\n  margin-bottom: 70px;\n  /* margin-top: 100px; */\n  padding: 30px 30px;\n  border-top: 5px solid ${(p) => p.theme.primaryColor};\n  border-radius: 10px;\n  box-shadow: ${(p) => p.theme.shadowSmall};\n  background-color: ${(p) => p.theme.secondaryColor};\n\n  &:hover {\n    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);\n  }\n\n  span {\n    font-size: 13px;\n    color: gray;\n  }\n`;\n\nexport const NoteDateAndReadTime = ({ date, institution }) => (\n  <span style={{ fontSize: 13, color: \"gray\" }}>\n    <span aria-label={`publish date ${date}`}>\n      <FontAwesomeIcon color=\"gray\" icon=\"calendar-alt\" />\n      &nbsp;&nbsp;{date}\n    </span>\n    &nbsp;&nbsp;&nbsp;\n    <span aria-label={`${institution}`}>\n      <FontAwesomeIcon color=\"gray\" icon={[\"fas\", \"institution\"]} />\n      &nbsp;&nbsp;{institution}\n    </span>\n  </span>\n);\n\nconst NoteCard = ({ date, institution, title, excerpt, slug, notetags }) => {\n  return (\n    <Link to={slug} aria-label={`${title} - ${institution}`}>\n      <PostWrapper>\n        <NoteDateAndReadTime date={date} institution={institution} />\n\n        <h2>{title}</h2>\n        <p>{excerpt}</p>\n\n        <div style={{ marginTop: 20 }}>\n          {notetags.map((tag) => (\n            <TagBreadcrumb\n              key={tag}\n              aria-label={`${tag} tag`}\n              to={`/notes/tags/${slugify(tag)}/`}\n            >\n              {tag}\n            </TagBreadcrumb>\n          ))}\n        </div>\n      </PostWrapper>\n    </Link>\n  );\n};\n\nNoteDateAndReadTime.propTypes = {\n  date: PropTypes.string.isRequired,\n  institution: PropTypes.string.isRequired,\n};\n\nNoteCard.propTypes = {\n  date: PropTypes.string.isRequired,\n  institution: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  excerpt: PropTypes.string.isRequired,\n  slug: PropTypes.string.isRequired,\n  notetags: PropTypes.array.isRequired,\n};\nexport default NoteCard;\n","import React from \"react\";\nimport { graphql } from \"gatsby\";\nimport { useTranslation } from \"gatsby-plugin-react-i18next\";\nimport SEO from \"@components/seo\";\n\nimport Layout from \"@components/Layout/Layout\";\n\nimport NoteCard from \"@src/components/Notes/NoteCard\";\nimport NoteLayout from \"@src/components/Notes/NotesLayout\";\n\nconst UniversitiesPage = ({ data, pageContext }) => {\n  const { t } = useTranslation();\n  const { inst } = pageContext;\n  const { edges, totalCount } = data.allMarkdownRemark;\n\n  const uniHeader = `${totalCount} post${\n    totalCount === 1 ? \"\" : \"s\"\n  } tagged with \"${inst}\"`;\n\n  return (\n    <Layout>\n      <SEO title={uniHeader + \" | \" + t(\"global.name\")} />\n\n      <NoteLayout>\n        <h1>{uniHeader}</h1>\n        <br />\n        <br />\n        {edges.map(({ node }) => {\n          const { slug } = node.fields;\n          const { title, date, notetags, institution } = node.frontmatter;\n          return (\n            <NoteCard\n              notetags={notetags}\n              key={node.id}\n              slug={slug}\n              title={title}\n              date={date}\n              institution={institution}\n              excerpt={node.excerpt}\n            />\n          );\n        })}\n      </NoteLayout>\n    </Layout>\n  );\n};\nexport default UniversitiesPage;\n\nexport const pageQuery = graphql`\n  query ($inst: String, $language: String!) {\n    locales: allLocale(\n      filter: { ns: { in: [\"common\"] }, language: { eq: $language } }\n    ) {\n      edges {\n        node {\n          ns\n          data\n          language\n        }\n      }\n    }\n    allMarkdownRemark(\n      sort: { frontmatter: { date: DESC } }\n      filter: {\n        frontmatter: { institution: { in: [$inst] } }\n        fields: { language: { eq: $language } }\n      }\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          excerpt\n          fields {\n            slug\n          }\n          frontmatter {\n            notetags\n            title\n            date(formatString: \"MMMM DD, YYYY\", locale: $language)\n            institution\n          }\n        }\n      }\n    }\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\nimport { Link, useI18next } from \"gatsby-plugin-react-i18next\";\nimport { useLocation } from \"@reach/router\";\nimport slugify from \"@components/slugify\";\n\nexport const useTags = () => {\n  const { language } = useI18next();\n  const data = useStaticQuery(graphql`\n    query {\n      allMarkdownRemark(\n        limit: 2000\n        filter: { fields: { posttype: { eq: \"notes\" } } }\n      ) {\n        edges {\n          node {\n            fields {\n              language\n            }\n            frontmatter {\n              notetags\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  // Filter by language and collect tags\n  const languagePosts = data.allMarkdownRemark.edges.filter(\n    ({ node }) => node.fields.language === language\n  );\n\n  // Collect all tags from current language posts\n  const tagCounts = {};\n  languagePosts.forEach(({ node }) => {\n    if (node.frontmatter.notetags) {\n      node.frontmatter.notetags.forEach((tag) => {\n        tagCounts[tag] = (tagCounts[tag] || 0) + 1;\n      });\n    }\n  });\n\n  // Convert to the expected format\n  const group = Object.entries(tagCounts).map(([fieldValue, totalCount]) => ({\n    fieldValue,\n    totalCount,\n  }));\n\n  return { allMarkdownRemark: { group } };\n};\n\nexport const TagBreadcrumb = styled(Link)`\n  float: left;\n  border: 1px solid ${(p) => (p.theme.dark ? p.theme.primaryColor : \" #d9e0ff\")};\n  border-radius: 50px;\n  padding: 8px 13px;\n  line-height: 10px;\n  margin: 5px;\n  font-size: 12px;\n\n  ${(p) =>\n    p.$active &&\n    `\n    background: ${p.theme.dark ? \" #FFDE63\" : \" #d9e0ff\"};\n    color: ${p.theme.dark ? p.theme.bgColor : \" #105286\"};\n    border-color: ${p.theme.dark ? \" #FFDE63\" : \" #d9e0ff\"};\n    font-weight: 600;\n  `}\n\n  &:hover {\n    background: ${(p) => (p.theme.dark ? p.theme.primaryColor : \" #d9e0ff\")};\n    color: ${(p) => (p.theme.dark ? \" #d9e0ff\" : \" #105286\")};\n  }\n`;\n\nconst Tags = () => {\n  const { language } = useI18next();\n  const location = useLocation();\n  const data = useStaticQuery(graphql`\n    query {\n      allMarkdownRemark(\n        limit: 2000\n        filter: { fields: { posttype: { eq: \"notes\" } } }\n      ) {\n        edges {\n          node {\n            fields {\n              language\n            }\n            frontmatter {\n              notetags\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  // Filter by language and collect tags\n  const languagePosts = data.allMarkdownRemark.edges.filter(\n    ({ node }) => node.fields.language === language\n  );\n\n  // Collect all tags from current language posts\n  const tagCounts = {};\n  languagePosts.forEach(({ node }) => {\n    if (node.frontmatter.notetags) {\n      node.frontmatter.notetags.forEach((tag) => {\n        tagCounts[tag] = (tagCounts[tag] || 0) + 1;\n      });\n    }\n  });\n\n  // Convert to the expected format\n  const tags = Object.entries(tagCounts).map(([fieldValue, totalCount]) => ({\n    fieldValue,\n    totalCount,\n  }));\n\n  return (\n    <section style={{ overflow: \"auto\" }}>\n      {tags.map((tag) => {\n        const tagSlug = slugify(tag.fieldValue);\n        const isActive = location?.pathname?.startsWith(\n          `/notes/tags/${tagSlug}/`\n        );\n        const linkTo = isActive ? \"/notes/\" : `/notes/tags/${tagSlug}/`;\n\n        return (\n          <TagBreadcrumb\n            key={tag.fieldValue}\n            to={linkTo}\n            $active={isActive}\n            aria-selected={isActive}\n            aria-label={`${tag.totalCount} posts tagged with ${tag.fieldValue}`}\n          >\n            {tag.fieldValue}, {tag.totalCount}\n          </TagBreadcrumb>\n        );\n      })}\n    </section>\n  );\n};\n\nexport default Tags;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styled from \"styled-components\";\n\nconst SplitLayoutWrapper = styled.section`\n  ${(p) => p.theme.spacing.sectionBottom};\n\n  & article:first-of-type {\n    margin-top: 15px;\n  }\n\n  display: grid;\n  grid-template-columns: minmax(750px, 1fr) 1fr;\n  grid-column-gap: 30px;\n  grid-template-areas: \"post side\";\n\n  .layout__content {\n    grid-area: post;\n  }\n  .layout__aside {\n    grid-area: side;\n  }\n\n  @media ${(props) => props.theme.media.fablet} {\n    /* setting g-t-c to 1fr 1fr because in mobile \n    version minmax was breaking the layout */\n    grid-template-columns: 1fr 1fr;\n    grid-column-gap: 0px;\n    grid-row-gap: 30px;\n    grid-template-areas:\n      \"post post\"\n      \"side side\";\n  }\n\n  .sticky__aside {\n    position: sticky;\n    top: 100px;\n  }\n`;\n\nconst SplitLayout = ({ content, aside }) => (\n  <SplitLayoutWrapper>\n    <section className=\"layout__content\">{content && content}</section>\n    <section className=\"layout__aside\">\n      <aside className=\"sticky__aside\">{aside && aside}</aside>\n    </section>\n  </SplitLayoutWrapper>\n);\n\nSplitLayout.propTypes = {\n  content: PropTypes.node.isRequired,\n  aside: PropTypes.node.isRequired,\n};\n\nexport default SplitLayout;\n"],"names":["module","exports","str","toString","trim","toLowerCase","replace","TagBreadcrumb","styled","Link","withConfig","displayName","componentId","p","theme","dark","primaryColor","Institutions","language","useI18next","languagePosts","useStaticQuery","allMarkdownRemark","edges","filter","_ref4","node","fields","institutionCounts","forEach","_ref5","frontmatter","institution","Array","isArray","institutions","Object","entries","map","_ref6","fieldValue","totalCount","React","style","overflow","tag","_languagePosts$find","find","_ref7","includes","slug","institution_slug","slugify","key","to","randomGenerator","min","max","Math","floor","random","useRandomNotePost","i18n","useTranslation","currentLanguage","filteredPosts","_ref","length","randomSlug","randomTitle","randomPost","window","location","pathname","title","children","sharerSection","t","SplitLayout","content","aside","fontSize","Tags","PostWrapper","article","shadowSmall","secondaryColor","NoteDateAndReadTime","date","color","FontAwesomeIcon","icon","_ref2","excerpt","notetags","marginTop","data","pageContext","inst","uniHeader","Layout","SEO","NoteLayout","NoteCard","id","$active","bgColor","useLocation","tagCounts","tags","_location$pathname","tagSlug","isActive","startsWith","linkTo","SplitLayoutWrapper","section","spacing","sectionBottom","props","media","fablet","className"],"sourceRoot":""}