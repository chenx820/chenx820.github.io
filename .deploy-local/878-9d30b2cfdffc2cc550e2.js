(self.webpackChunkchen_huang=self.webpackChunkchen_huang||[]).push([[878],{2878:function(t,e,n){var o;o=function(t,e){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var o=n(1),r=n.n(o),a=n(0),s=n.n(a);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}var h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,c(e).apply(this,arguments))}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),n=e,(o=[{key:"render",value:function(){var t=this,e=this.props,n=e.plusBtnContents,o=e.minusBtnContents,a=e.btnClass,s=e.plusBtnClass,i=e.minusBtnClass,u=e.controlsClass,l=e.scale,c=e.minScale,p=e.maxScale,h=e.onClickPlus,f=e.onClickMinus,d=e.disableZoom,v={width:30,paddingTop:5,marginBottom:5},m=u?void 0:{position:"absolute",right:10,top:10};function y(t){t.preventDefault(),t.target.blur(),d||h()}function b(t){t.preventDefault(),t.target.blur(),d||f()}return r.a.createElement("div",{style:m,className:u},r.a.createElement("div",null,r.a.createElement("button",{ref:function(e){t.plusNode=e},onClick:y,onTouchEnd:y,className:[a||"",s||""].join(" "),type:"button",style:a||s?void 0:v,disabled:d||l>=p},n)),r.a.createElement("div",null,r.a.createElement("button",{ref:function(e){t.minusNode=e},onClick:b,onTouchEnd:b,className:[a||"",i||""].join(" "),type:"button",style:a||i?void 0:v,disabled:d||l<=c},o)))}}])&&u(n.prototype,o),a&&u(n,a),e}(o.Component);h.propTypes={onClickPlus:s.a.func.isRequired,onClickMinus:s.a.func.isRequired,plusBtnContents:s.a.node,minusBtnContents:s.a.node,btnClass:s.a.string,plusBtnClass:s.a.string,minusBtnClass:s.a.string,controlsClass:s.a.string,scale:s.a.number,minScale:s.a.number,maxScale:s.a.number,disableZoom:s.a.bool},h.defaultProps={plusBtnContents:"+",minusBtnContents:"-",disableZoom:!1};var f=h;function d(t,e,n){return Math.max(t,Math.min(e,n))}function v(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function m(t){return{x:t.clientX,y:t.clientY}}function y(t,e){return function(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}(m(t),m(e))}var b=!1;try{var g={get passive(){b=!0}};window.addEventListener("test",g,g),window.removeEventListener("test",g,g)}catch(F){b=!1}var C=function(t){return b?{passive:t}:t};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function w(){return w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},w.apply(this,arguments)}function S(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?T(t):e}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}var D=function(t,e){return e*t-t},I=s.a.shape({x:s.a.number,y:s.a.number}),L=function(t){function e(t){var n;return M(this,e),(n=k(this,O(e).call(this,t))).state={shouldPreventTouchEndDefault:!1},n.startPointerInfo=void 0,n.onMouseDown=n.onMouseDown.bind(T(n)),n.onTouchStart=n.onTouchStart.bind(T(n)),n.onMouseMove=n.onMouseMove.bind(T(n)),n.onTouchMove=n.onTouchMove.bind(T(n)),n.onMouseUp=n.onMouseUp.bind(T(n)),n.onTouchEnd=n.onTouchEnd.bind(T(n)),n.onWheel=n.onWheel.bind(T(n)),n}return j(e,t),B(e,null,[{key:"propTypes",get:function(){return{children:s.a.func,value:s.a.shape({scale:s.a.number.isRequired,translation:I.isRequired}).isRequired,onChange:s.a.func.isRequired,disableZoom:s.a.bool,disablePan:s.a.bool,translationBounds:s.a.shape({xMin:s.a.number,xMax:s.a.number,yMin:s.a.number,yMax:s.a.number}),minScale:s.a.number,maxScale:s.a.number,showControls:s.a.bool,plusBtnContents:s.a.node,minusBtnContents:s.a.node,btnClass:s.a.string,plusBtnClass:s.a.string,minusBtnClass:s.a.string,controlsClass:s.a.string}}},{key:"defaultProps",get:function(){return{minScale:.05,maxScale:3,showControls:!1,translationBounds:{},disableZoom:!1,disablePan:!1}}}]),B(e,[{key:"componentDidMount",value:function(){var t=C(!1);this.getContainerNode().addEventListener("wheel",this.onWheel,t),this.getContainerNode().addEventListener("touchstart",this.onTouchStart,t),this.getContainerNode().addEventListener("mousedown",this.onMouseDown,t),window.addEventListener("touchmove",this.onTouchMove,t),window.addEventListener("mousemove",this.onMouseMove,t);var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){x(t,e,n[e])})}return t}({capture:!0},t);window.addEventListener("touchend",this.onTouchEnd,e),window.addEventListener("mouseup",this.onMouseUp,e)}},{key:"componentWillUnmount",value:function(){this.getContainerNode().removeEventListener("wheel",this.onWheel),this.getContainerNode().removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),this.getContainerNode().removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function(t){t.preventDefault(),this.setPointerState([t])}},{key:"onTouchStart",value:function(t){t.preventDefault(),this.setPointerState(t.touches)}},{key:"onMouseUp",value:function(t){this.setPointerState()}},{key:"onTouchEnd",value:function(t){this.setPointerState(t.touches)}},{key:"onMouseMove",value:function(t){this.startPointerInfo&&!this.props.disablePan&&(t.preventDefault(),this.onDrag(t))}},{key:"onTouchMove",value:function(t){if(this.startPointerInfo){t.preventDefault();var e=this.props,n=e.disablePan,o=e.disableZoom;2==t.touches.length&&this.startPointerInfo.pointers.length>1&&!o?this.scaleFromMultiTouch(t):1===t.touches.length&&this.startPointerInfo&&!n&&this.onDrag(t.touches[0])}}},{key:"onDrag",value:function(t){var e=this,n=this.startPointerInfo,o=n.translation,r=n.pointers[0],a=t.clientX-r.clientX,s=t.clientY-r.clientY,i={x:o.x+a,y:o.y+s},u=Math.abs(a)>1||Math.abs(s)>1;this.setState({shouldPreventTouchEndDefault:u},function(){e.props.onChange({scale:e.props.value.scale,translation:e.clampTranslation(i)})})}},{key:"onWheel",value:function(t){if(!this.props.disableZoom){t.preventDefault(),t.stopPropagation();var e=Math.pow(2,.002*t.deltaY),n=d(this.props.minScale,this.props.value.scale+(1-e),this.props.maxScale),o=this.clientPosToTranslatedPos({x:t.clientX,y:t.clientY});this.scaleFromPoint(n,o)}}},{key:"setPointerState",value:function(t){t&&0!==t.length?this.startPointerInfo={pointers:t,scale:this.props.value.scale,translation:this.props.value.translation}:this.startPointerInfo=void 0}},{key:"clampTranslation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.x,o=t.y,r=e.translationBounds,a=r.xMax,s=r.xMin,i=r.yMax,u=r.yMin;return u=null!=u?u:-1/0,i=null!=i?i:1/0,{x:d(s=null!=s?s:-1/0,n,a=null!=a?a:1/0),y:d(u,o,i)}}},{key:"translatedOrigin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.value.translation,e=this.getContainerBoundingClientRect();return{x:e.left+t.x,y:e.top+t.y}}},{key:"clientPosToTranslatedPos",value:function(t){var e=t.x,n=t.y,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.value.translation,r=this.translatedOrigin(o);return{x:e-r.x,y:n-r.y}}},{key:"scaleFromPoint",value:function(t,e){var n=this.props.value,o=n.translation,r=n.scale,a=t/(0!=r?r:1),s=D(e.x,a),i=D(e.y,a),u={x:o.x-s,y:o.y-i};this.props.onChange({scale:t,translation:this.clampTranslation(u)})}},{key:"scaleFromMultiTouch",value:function(t){var e=this.startPointerInfo.pointers,n=t.touches,o=y(e[0],e[1]),r=y(n[0],n[1])/o,a=this.startPointerInfo.scale,s=a+(r-1)*a,i=d(this.props.minScale,s,this.props.maxScale),u=v(m(e[0]),m(e[1])),l=v(m(n[0]),m(n[1])),c=l.x-u.x,p=l.y-u.y,h=i/a,f=this.clientPosToTranslatedPos(u,this.startPointerInfo.translation),b=D(f.x,h),g=D(f.y,h),C={x:this.startPointerInfo.translation.x-b+c,y:this.startPointerInfo.translation.y-g+p};this.props.onChange({scale:i,translation:this.clampTranslation(C)})}},{key:"discreteScaleStepSize",value:function(){var t=this.props,e=t.minScale,n=t.maxScale;return Math.abs(n-e)/10}},{key:"changeScale",value:function(t){var e=this.props.value.scale+t,n=this.props,o=d(n.minScale,e,n.maxScale),r=this.getContainerBoundingClientRect(),a=r.left+r.width/2,s=r.top+r.height/2,i=this.clientPosToTranslatedPos({x:a,y:s});this.scaleFromPoint(o,i)}},{key:"getContainerNode",value:function(){return this.containerNode}},{key:"getContainerBoundingClientRect",value:function(){return this.getContainerNode().getBoundingClientRect()}},{key:"renderControls",value:function(){var t=this,e=this.discreteScaleStepSize();return r.a.createElement(f,{onClickPlus:function(){return t.changeScale(e)},onClickMinus:function(){return t.changeScale(-e)},plusBtnContents:this.props.plusBtnContents,minusBtnContents:this.props.minusBtnContents,btnClass:this.props.btnClass,plusBtnClass:this.props.plusBtnClass,minusBtnClass:this.props.minusBtnClass,controlsClass:this.props.controlsClass,scale:this.props.value.scale,minScale:this.props.minScale,maxScale:this.props.maxScale,disableZoom:this.props.disableZoom})}},{key:"render",value:function(){var t=this,e=this.props,n=e.showControls,o=e.children,a=this.props.value.scale,s=this.clampTranslation(this.props.value.translation),i=function(e){t.state.shouldPreventTouchEndDefault&&(e.preventDefault(),t.setState({shouldPreventTouchEndDefault:!1}))};return r.a.createElement("div",{ref:function(e){t.containerNode=e},style:{height:"100%",width:"100%",position:"relative",touchAction:"none"},onClickCapture:i,onTouchEndCapture:i},o?o({translation:s,scale:a}):void 0,n?this.renderControls():void 0)}}]),e}(o.Component),R=function(t){function e(t){var n;M(this,e),n=k(this,O(e).call(this,t));var o=e.isControlled(t);return n.state=o?{lastKnownValueFromProps:t.value}:{value:t.defaultValue||{scale:1,translation:{x:0,y:0}},lastKnownValueFromProps:void 0},n}return j(e,t),B(e,null,[{key:"propTypes",get:function(){return{children:s.a.func,value:s.a.shape({scale:s.a.number.isRequired,translation:I.isRequired}),defaultValue:s.a.shape({scale:s.a.number.isRequired,translation:I.isRequired}),disableZoom:s.a.bool,disablePan:s.a.bool,onChange:s.a.func,translationBounds:s.a.shape({xMin:s.a.number,xMax:s.a.number,yMin:s.a.number,yMax:s.a.number}),minScale:s.a.number,maxScale:s.a.number,showControls:s.a.bool,plusBtnContents:s.a.node,minusBtnContents:s.a.node,btnClass:s.a.string,plusBtnClass:s.a.string,minusBtnClass:s.a.string,controlsClass:s.a.string}}}]),B(e,[{key:"innerProps",value:function(){var t=this.props,e=(t.value,t.defaultValue,t.onChange,S(t,["value","defaultValue","onChange"]));return e}},{key:"getValue",value:function(){return e.isControlled(this.props)?this.props.value:this.state.value}},{key:"render",value:function(){var t=this,n=this.props,o=n.onChange,a=n.children,s=e.isControlled(this.props),i=s?this.props.value:this.state.value;return r.a.createElement(L,w({onChange:function(e){s?o(e):t.setState({value:e})},value:i},this.innerProps()),a)}}],[{key:"getDerivedStateFromProps",value:function(t,n){var o=e.isControlled(t),r=n.lastKnownValueFromProps&&e.isControlled({value:n.lastKnownValueFromProps});return!r&&o?{value:void 0,lastKnownValueFromProps:t.value}:r&&!o?{value:n.lastKnownValueFromProps,lastKnownValueFromProps:void 0}:r&&o?{lastKnownValueFromProps:t.value}:r||o?void 0:null}},{key:"isControlled",value:function(t){return null!=t.value}}]),e}(o.Component),N=function(t){return r.a.createElement(R,t,function(e){var n=e.translation,o=e.scale,a="translate(".concat(n.x,"px, ").concat(n.y,"px) scale(").concat(o,")");return r.a.createElement("div",{style:{height:"100%",width:"100%",position:"relative",overflow:"hidden",touchAction:"none",msTouchAction:"none",cursor:"all-scroll",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"}},r.a.createElement("div",{style:{display:"inline-block",transform:a,transformOrigin:"0 0 "}},t.children))})};n.d(e,"MapInteractionCSS",function(){return N}),n.d(e,"MapInteraction",function(){return R}),e.default=R}])},t.exports=o(n(5556),n(6540))}}]);
//# sourceMappingURL=878-9d30b2cfdffc2cc550e2.js.map